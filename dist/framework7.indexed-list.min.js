/*
 * Framework7 Indexed List 0.1.0
 * Framework7 plugin to add Alphabet indexed list
 *
 * https://github.com/boynet/Framework7-Indexed-List-plugin
 *
 * Copyright 2015, boynet
 *
 * Licensed under MIT
 *
 * Released on: 17 Sep, 2014
*/
Framework7.prototype.plugins.indexedlist=function(e,t){function r(t){function c(e){e.preventDefault();s=true;var t=n(e.target);if(!t.is("li"))t=t.parents("li");if(t.length>0){v(t.eq(0).data("index-letter"))}}function h(e){if(!s)return;e.preventDefault();var t;if(e.type==="mousemove"){t=n(e.target)}else{t=n(document.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY))}if(!t.is("li"))t=t.parents("li");if(t.length===0)return;if(t.length>0&&!t.is(".list-index li"))return;v(t.eq(0).data("index-letter"))}function p(e){s=o=false}function d(){var e=[];var t="";i.find(".list-group").each(function(){var r=n(this).find("ul .list-group-title");var i=r.html().trim().charAt(0).toUpperCase();r.attr("data-index-letter",i);t+='<li data-index-letter="'+i+'">'+i+"</li>";e.push(i)});r.html(t);return e}function v(e){var t=i.find('.list-group ul li[data-index-letter="'+e+'"]');if(!t.length)return;var n=t.offset().top+i.scrollTop()-(f?44:0)-(l?44:0);i.scrollTop(n)}var r=n(t.container).find(".list-index");if(r.length===0)return;var i=n(t.container).find(".page-content");d();var s,o;var u;var a;var f=i.parents(".navbar-fixed").length>0||i.parents(".navbar-through").length>0;var l=n(t.container).find(".searchbar").length>0;if(l){console.log(r);r.css("margin-top","44px")}n(t.container).on("click",".list-index li",function(e){var t=n(e.target);if(!t.is("li"))t=t.parents("li");if(t.length>0){v(t.eq(0).data("index-letter"))}});r.on(e.touchEvents.start,c);r.on(e.touchEvents.move,h);r.on(e.touchEvents.end,p)}var n=window.Dom7;return{hooks:{pageInit:r}}}
